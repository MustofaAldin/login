<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard | Aplikasi MyToko</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            lexend: ['Lexend Deca', 'sans-serif']
          }
        }
      }
    }
  </script>

  <style>
    .lexend-deca-body {
      font-family: "Lexend Deca", sans-serif;
    }
    .sidebar-mobile-open {
        overflow: hidden;
    }
    .sidebar-mobile-open #sidebar {
        transform: translateX(0);
    }
    .sidebar-mobile-open #sidebar-overlay {
        display: block;
    }
    /* Transisi untuk pop-up notifikasi/pesan */
    .popup {
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
    }
    .popup-hidden {
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
    }
  </style>
</head>
<body class="lexend-deca-body bg-[#F5F7FA] dark:bg-gray-900 transition-colors duration-300">

<div class="relative min-h-screen lg:flex">
  <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>

  <aside id="sidebar" class="w-64 bg-white dark:bg-gray-800 shadow-md flex-shrink-0 fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:static transition-transform duration-300 ease-in-out z-40">
    <div class="flex flex-col h-full">
        <div class="p-6">
          <div class="flex items-center justify-center mb-10">
            <svg class="w-8 h-8 mr-2" viewBox="0 0 24 24" fill="none"><rect x="4" y="4" width="6" height="6" fill="#3361FF"/><rect x="14" y="4" width="6" height="6" fill="#FF6633"/></svg>
            <h1 class="text-xl font-bold text-gray-900 dark:text-white">MyToko</h1>
          </div>
          <nav>
            <ul>
              <li>
                <a href="#" class="flex items-center px-4 py-3 text-blue-600 dark:text-white bg-blue-50 dark:bg-gray-700 rounded-lg font-semibold">
                  <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
                  <span>Dashboard</span>
                </a>
              </li>
              <li class="mt-2">
                <a href="kelola-barang.html" class="flex items-center px-4 py-3 text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
                   <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
                  <span>Kelola Barang</span>
                </a>
              </li>
              <li class="mt-2">
                <a href="pengguna.html" class="flex items-center px-4 py-3 text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
                  <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
                  <span>Pengguna</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
        <div class="p-6 mt-auto">
           <a href="index.html" class="flex items-center px-4 py-3 text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
             <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
           <span>Logout</span>
         </a>
        </div>
    </div>
  </aside>

  <main class="flex-1">
    <div class="p-4 md:p-8">
      <header class="flex justify-between items-center mb-8">
        <div class="flex items-center">
            <button id="hamburger-button" class="lg:hidden mr-4 text-gray-600 dark:text-gray-300"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg></button>
            <div>
              <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">Dashboard</h1>
              <p class="text-gray-500 dark:text-gray-300 text-sm mt-1">Selamat datang kembali, <b>Mustofa Aldin!</b></p>
            </div>
        </div>
        <div class="flex items-center space-x-4 flex-shrink-0">
            <button id="messages-button" class="relative p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><span class="sr-only">Buka Pesan</span><svg class="h-6 w-6 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg><span class="absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500"></span></button>
            <button id="notifications-button" class="relative p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"><span class="sr-only">Buka Notifikasi</span><svg class="h-6 w-6 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg><span class="absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500"></span></button>
            
            <button id="theme-toggle" type="button" class="relative flex items-center w-20 h-10 bg-gray-300 dark:bg-gray-600 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800"><span class="sr-only">Toggle dark mode</span><span class="absolute left-1 inline-flex items-center justify-center w-8 h-8 bg-white rounded-full shadow-md transform transition-transform duration-300 dark:translate-x-10"><svg class="h-5 w-5 text-yellow-500 transition-all duration-300 transform dark:-rotate-90 dark:opacity-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><svg class="absolute h-5 w-5 text-slate-300 transition-all duration-300 transform rotate-90 opacity-0 dark:rotate-0 dark:opacity-100" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></span></button>
            <div class="relative"><img src="profil.jpg" alt="User Avatar" class="w-10 h-10 rounded-full cursor-pointer"></div>
        </div>
      </header>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg flex items-center space-x-4"><div class="p-3 bg-green-100 dark:bg-green-800/50 rounded-full"><svg class="h-6 w-6 text-green-600 dark:text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01M12 6v-1h4a1 1 0 011 1v10a1 1 0 01-1 1h-4v-1m-4-1v1H7a1 1 0 01-1-1V7a1 1 0 011-1h3v1zm0 0h.01"></path></svg></div><div><p class="text-gray-500 dark:text-gray-400 text-sm">Total Keuntungan</p><p class="text-2xl font-bold text-gray-900 dark:text-white">Rp 12.5M</p></div></div>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg flex items-center space-x-4"><div class="p-3 bg-blue-100 dark:bg-blue-800/50 rounded-full"><svg class="h-6 w-6 text-blue-600 dark:text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg></div><div><p class="text-gray-500 dark:text-gray-400 text-sm">Jumlah Stok</p><p class="text-2xl font-bold text-gray-900 dark:text-white">1,450 pcs</p></div></div>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg flex items-center space-x-4"><div class="p-3 bg-yellow-100 dark:bg-yellow-800/50 rounded-full"><svg class="h-6 w-6 text-yellow-600 dark:text-yellow-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div><div><p class="text-gray-500 dark:text-gray-400 text-sm">Total Penjualan</p><p class="text-2xl font-bold text-gray-900 dark:text-white">8,721</p></div></div>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg flex items-center space-x-4"><div class="p-3 bg-indigo-100 dark:bg-indigo-800/50 rounded-full"><svg class="h-6 w-6 text-indigo-600 dark:text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2-2h8a1 1 0 001-1z"></path></svg></div><div><p class="text-gray-500 dark:text-gray-400 text-sm">Jumlah Supplier</p><p class="text-2xl font-bold text-gray-900 dark:text-white">42</p></div></div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Analisis Penjualan</h3>
          <div>
            <canvas id="salesChart"></canvas>
          </div>
        </div>

        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Aktivitas Terbaru</h3>
          <ul class="space-y-4">
            <li class="flex items-center space-x-3"><div class="p-2 bg-blue-100 dark:bg-blue-800/50 rounded-full"><svg class="h-5 w-5 text-blue-600 dark:text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg></div><div><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Pesanan baru #8740 diterima.</p><p class="text-xs text-gray-500 dark:text-gray-400">2 menit lalu</p></div></li>
            <li class="flex items-center space-x-3"><div class="p-2 bg-green-100 dark:bg-green-800/50 rounded-full"><svg class="h-5 w-5 text-green-600 dark:text-green-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Pembayaran dari PT. Maju Jaya lunas.</p><p class="text-xs text-gray-500 dark:text-gray-400">1 jam lalu</p></div></li>
            <li class="flex items-center space-x-3"><div class="p-2 bg-yellow-100 dark:bg-yellow-800/50 rounded-full"><svg class="h-5 w-5 text-yellow-600 dark:text-yellow-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><div><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Stok 'Keyboard Mekanikal' hampir habis.</p><p class="text-xs text-gray-500 dark:text-gray-400">4 jam lalu</p></div></li>
             <li class="flex items-center space-x-3"><div class="p-2 bg-red-100 dark:bg-red-800/50 rounded-full"><svg class="h-5 w-5 text-red-600 dark:text-red-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg></div><div><p class="text-sm font-medium text-gray-800 dark:text-gray-200">Gagal terhubung ke supplier 'Sinar Abadi'.</p><p class="text-xs text-gray-500 dark:text-gray-400">1 hari lalu</p></div></li>
          </ul>
        </div>
      </div>
    </div>
  </main>
</div>

<div id="messages-popup" class="popup popup-hidden fixed top-16 right-8 md:right-48 mt-2 w-80 md:w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl z-50 border dark:border-gray-700">
    <div class="p-4 border-b dark:border-gray-700">
        <h3 class="font-semibold text-gray-900 dark:text-white">Pesan Terbaru</h3>
    </div>
    <div class="divide-y dark:divide-gray-700 max-h-96 overflow-y-auto">
        <a href="#" class="block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50">
          <div class="flex items-start space-x-4">
              <img class="w-10 h-10 rounded-full object-cover" src="https://i.pravatar.cc/40?u=siti" alt="Siti Sarah">
              <div class="flex-1 min-w-0">
                  <p class="text-sm font-medium text-gray-900 truncate dark:text-white">Siti Sarah</p>
                  <p class="text-sm text-gray-600 dark:text-gray-300 mt-1 truncate">Laporan PPN bulan lalu sudah saya kirim via email.</p>
              </div>
          </div>
        </a>
    </div>
    <a href="#" class="block py-2 text-sm font-medium text-center text-blue-600 bg-gray-50 hover:bg-gray-100 dark:bg-gray-700/50 dark:text-blue-500 dark:hover:bg-gray-700 rounded-b-xl">
        Lihat Semua Pesan
    </a>
</div>

<div id="notifications-popup" class="popup popup-hidden fixed top-16 right-8 md:right-36 mt-2 w-80 md:w-96 bg-white dark:bg-gray-800 rounded-xl shadow-xl z-50 border dark:border-gray-700">
    <div class="p-4 border-b dark:border-gray-700">
        <h3 class="font-semibold text-gray-900 dark:text-white">Notifikasi</h3>
    </div>
    <div class="divide-y dark:divide-gray-700 max-h-96 overflow-y-auto">
        <a href="#" class="flex items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50">
            <div class="flex-shrink-0 mr-3">
                <div class="flex items-center justify-center h-10 w-10 rounded-full bg-green-100 dark:bg-green-900">
                    <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                </div>
            </div>
            <div class="w-full">
                <div class="text-gray-600 dark:text-gray-300 text-sm mb-1.5">Laporan penjualan Q2 telah berhasil dibuat.</div>
                <div class="text-xs text-blue-600 dark:text-blue-500">1 jam yang lalu</div>
            </div>
        </a>
    </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- Dark Mode & Sidebar Logic (Sama seperti sebelumnya) ---
    const themeToggleBtn = document.getElementById('theme-toggle');
    const applyTheme = () => { if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.remove('dark'); }};
    applyTheme();
    themeToggleBtn.addEventListener('click', () => { document.documentElement.classList.toggle('dark'); localStorage.setItem('color-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light'); });
    const hamburgerButton = document.getElementById('hamburger-button');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const body = document.body;
    const toggleSidebar = () => { body.classList.toggle('sidebar-mobile-open'); };
    hamburgerButton.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);

    // --- REVISI: Logika Pop-up Pesan & Notifikasi (Baru ditambahkan) ---
    const messagesButton = document.getElementById('messages-button');
    const notificationsButton = document.getElementById('notifications-button');
    const messagesPopup = document.getElementById('messages-popup');
    const notificationsPopup = document.getElementById('notifications-popup');

    const togglePopup = (popup) => {
        const isHidden = popup.classList.contains('popup-hidden');
        // Selalu sembunyikan semua pop-up terlebih dahulu
        messagesPopup.classList.add('popup-hidden');
        notificationsPopup.classList.add('popup-hidden');
        // Jika pop-up yang diklik tadinya tersembunyi, tampilkan
        if (isHidden) {
            popup.classList.remove('popup-hidden');
        }
    };
    
    messagesButton.addEventListener('click', (e) => {
        e.stopPropagation(); // Mencegah window click event terpicu
        togglePopup(messagesPopup);
    });

    notificationsButton.addEventListener('click', (e) => {
        e.stopPropagation(); // Mencegah window click event terpicu
        togglePopup(notificationsPopup);
    });

    // Event listener untuk menutup pop-up jika klik di luar area
    window.addEventListener('click', (e) => {
        if (!messagesPopup.contains(e.target) && !messagesButton.contains(e.target)) {
            messagesPopup.classList.add('popup-hidden');
        }
        if (!notificationsPopup.contains(e.target) && !notificationsButton.contains(e.target)) {
            notificationsPopup.classList.add('popup-hidden');
        }
    });

    // --- Chart.js Logic (Tidak diubah) ---
    const ctx = document.getElementById('salesChart');
    if (ctx) {
      const salesChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu'],
          datasets: [{
            label: 'Penjualan',
            data: [120, 190, 300, 500, 220, 310, 450, 290], // Data penjualan dummy
            backgroundColor: 'rgba(51, 97, 255, 0.7)',
            borderColor: 'rgba(51, 97, 255, 1)',
            borderWidth: 1,
            borderRadius: 8,
            barPercentage: 0.6,
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              backgroundColor: '#1F2937',
              titleColor: '#FFFFFF',
              bodyColor: '#FFFFFF',
              padding: 10,
              cornerRadius: 8,
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(107, 114, 128, 0.2)'
              },
              ticks: {
                  color: document.documentElement.classList.contains('dark') ? '#9CA3AF' : '#6B7280'
              }
            },
            x: {
              grid: {
                display: false
              },
              ticks: {
                  color: document.documentElement.classList.contains('dark') ? '#9CA3AF' : '#6B7280'
              }
            }
          }
        }
      });
      // Update warna ticks saat mode diubah
      themeToggleBtn.addEventListener('click', () => {
        const isDark = document.documentElement.classList.contains('dark');
        salesChart.options.scales.y.ticks.color = isDark ? '#9CA3AF' : '#6B7280';
        salesChart.options.scales.x.ticks.color = isDark ? '#9CA3AF' : '#6B7280';
        salesChart.update();
      });
    }
  });
</script>
</body>
</html>